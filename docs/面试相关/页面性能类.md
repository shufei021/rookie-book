# 页面性能类

## 提升页面性能的方法有哪些？



+ **1.资源压缩合并，减少`http`请求(压缩资源合并，把资源变小)**

+ **2.非核心代码异步加载**

  - 异步加载的方式

    - 动态脚步加载

      > 通过document.head.append( ) 异步添加script脚本到页面上

    - defer

    - async

  - 异步加载的区别

    - defer是再HTML解析完后才会执行，如果是多个，按照加载的顺序依次执行

    - async 是在加载完之后立即执行，如果是多个，执行顺序与加载顺序无关

    

+ **3.利用浏览器缓存**

  + 缓存分类

    - **强缓存**

      - 1.Expires  Expires：Thu，21 Jan 2017 23:59:02 GMT （下发的服务器的时间）
      - 2.Cache-Control Cache-Control:max-age=3600

      > 从拿到这个文件开始 3600秒内不会再去服务器文件，**直接从浏览器副本拿出来直接用**
      >
      > 1和2都下发了，以2为准，这是规定

    - **协商缓存**

      - Last-Modified If-Modified-Since Last-Modified :Wed ,26 Jan 2017 00:35:11GTM 
      - Etag If-None-Match

      > 过了强缓存时间，浏览器向服务器这个资源是否可以再用，（Etag If-None-Match）根据这个来判断

    > 浏览器缓存分为强缓存和协商缓存。当客户端请求某个资源时，获取缓存的流程如下：
    >
    > - 先根据这个资源的一些 `http header` 判断它是否命中强缓存，如果命中，则直接从本地获取缓存资源，不会发请求到服务器；
    > - 当强缓存没有命中时，客户端会发送请求到服务器，服务器通过另一些 `request header`验证这个资源是否命中协商缓存，称为 `http`再验证，如果命中，服务器将请求返回，但不返回资源，而是告诉客户端直接从缓存中获取，客户端收到返回后就会从缓存中获取资源；
    > - 强缓存和协商缓存共同之处在于，如果命中缓存，服务器都不会返回资源；
    > - 区别是，强缓存不对发送请求到服务器，但协商缓存会。
    > - 当协商缓存也没命中时，服务器就会将资源发送回客户端。
    > - 当 `ctrl+f5` 强制刷新网页时，直接从服务器加载，跳过强缓存和协商缓存；
    > - 当 `f5` 刷新网页时，跳过强缓存，但是会检查协商缓存；

    > ### 强缓存
    >
    > - Expires（该字段是 `http1.0` 时的规范，值为一个绝对时间的 `GMT` 格式的时间字符串，代表缓存资源的过期时间）
    > - Cache-Control:max-age（该字段是 `http1.1` 的规范，强缓存利用其 `max-age` 值来判断缓存资源的最大生命周期，它的值单位为秒）
    >
    > ### 协商缓存
    >
    > - Last-Modified（值为资源最后更新时间，随服务器response返回）
    > - If-Modified-Since（通过比较两个时间来判断资源在两次请求期间是否有过修改，如果没有修改，则命中协商缓存）
    > - ETag（表示资源内容的唯一标识，随服务器response返回）
    > - If-None-Match（服务器通过比较请求头部的If-None-Match与当前资源的ETag是否一致来判断资源是否在两次请求之间有过修改，如果没有修改，则命中协商缓存）

+ **4.使用CDN**

+ **5.预解析DNS**

  - ```javascript
    <meta http-equiv="x-dns-prefetch-control" content="on">
    ```

  - ```javascript
    <link rel="dns-prefetch" href="//host_name_to_prefetch.com" content="on">
    ```

